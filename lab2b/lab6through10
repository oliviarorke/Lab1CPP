//
//  lab2b.cpp
//  FirstProject
//
//  Created by Livs  on 9/12/19.
//  Copyright Â© 2019 Livs . All rights reserved.
//

#include <stdlib.h>
#include <time.h>
#include <iostream>
using namespace std;

/** Question 5 **/
//Displays a comma delineated list of values in a supplied array
void arrayPrint(int arr[], int length) {
    for (int x=0; x<length; x++) {
        cout << arr[x] << ", ";
    }
    cout << endl;
}

/** Question 6 **/
//Creates an array filled with random integers on the heap
int* randArrayGenerator(int *x, int *y, int *z){
    srand(static_cast<unsigned int>(time(NULL))); //Set the generator's seed
    static int length = (rand() % 25) + 25; //Random number between 25 and 50
    int min = -(rand() % 5) - 5; //Random number between -10 and -5
    int max = (rand() % 5) + 5; //Random number between 5 and 10
    
    //Create the array and fill it iteratively with rands between min and max
    int *array = new int[length];
    
    for(int i = 0; i < length; i++){
        array[i] = (rand() % (max-min)) + min;
    }
    
    //Modify input parameters to hold lenth, max, and min
    *x = length;
    *y = max;
    *z = min;
    
    return array;
}

/** Question 7 **/
//This function fails to display properly as when the array (a) is called in the main method,
//its reference in the stack has been cleared as the top of stack is cleared when the method is finished executing.
//This causes wildly wrong integers to display in the output.
int* randStackArray(int size){
    int min = -(rand() % 5) - 5; //Random number between -10 and -5
    int max = (rand() % 5) + 5; //Random number between 5 and 10
    
    //Create the array on the stack
    int a[size];
    
    //Fill the array iteratively with rands between min and max
    for(int i = 0; i < size; i++){
        a[i] = (rand() % (max-min)) + min;
    }
    
    return a;
}

/** Question 8 **/
//Prints the memory addresses of each element of a supplied array
void printAddresses(int nums[], int size){
    for(int i = 0; i < size; i++){
        cout << &nums[i] << + ", ";
    }
}

/** Question 9 **/
//Displays a comma delineated list of doubles from a specified array with a supplied size
void printDoubleAddresses(double nums[], int size){
    for(int i = 0; i < size; i++){
        cout << &nums[i] << + ", ";
    }
}

/** Question 10 **/
int* removeDoubleNumbers(int nums[], int* size){
    //Create a temporary array of the same size to add the non repeating values to
    int tempArray[*size];
    int newSize = 0;
    
    //Iterate through the array, adding valid values to tempArray and incrementing newSize as necessary
    for(int i = 0; i < *size; i++){
        if(nums[i] != nums[i+1]){
            tempArray[newSize] = nums[i];
            newSize++;
        }
    }
    
    //Create a new array in the heap with the non duplicate values
    int *updatedArray = new int[newSize];
    
    //Populate updatedArray with the values from tempArray
    for(int i = 0; i < newSize; i++){
        updatedArray[i] = tempArray[i];
    }
    
    //Adjust size parameter
    *size = newSize;
    
    //Return the new array
    return updatedArray;
}

int main(){
    //Test Question 6
    int *x = new int;
    int *y = new int;
    int *z = new int;
    int *a = randArrayGenerator(x, y, z);
    arrayPrint(a, *x);
    cout << "\n" << endl; //New Line for readability
    
    //Test Question 7
    randStackArray(25);
    //cout << "\n" << endl; //New Line for readability
    
    //Test Question 8 - uses array and size from question 6
    printAddresses(a, *x);
    cout << "\n" << endl; //New Line for readability

    //Garbage Collection
    delete x;
    delete y;
    delete z;
    delete[] a;
    
    //Test Question 9
    double ls[5] = {2.5, 5.4, 7.9, 10.1, 55.7};
    printDoubleAddresses(ls, 5);
    cout << "\n" << endl; //New Line for readability
    
    //Test Question 10
    int* size = new int;
    *size = 25;
    int nums[25] = {5,4,4,3,6,6,6,8,9,5,1,3,8,8,1,8,9,9,3,2,2,2,6,1,2};
    arrayPrint(nums, *size);
    cout << "\n" << endl; //New Line for readability

    int *arr = removeDoubleNumbers(nums, size);
    arrayPrint(arr, *size);
    cout << "\n" << endl; //New Line for readability

    //Garbage Collection
    delete size;
    delete[] arr;
    
    return 0;
}


